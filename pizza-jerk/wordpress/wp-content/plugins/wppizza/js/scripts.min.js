var wppizzaClickEvent="click",wppizzaShortcodeTotals=function(){};jQuery(document).ready(function(e){var a=function(){var a,t=e(".wppizza-cart-sticky"),i=!1;if("undefined"!=typeof wppizza.crt.lmtb&&e("#"+wppizza.crt.lmtb).length>0){i=e("#"+wppizza.crt.lmtb);var p=i.offset().top}var o=e(window).scrollTop()+wppizza.crt.mt,r=[],n=[],z=[],l=!1;wppizza.crt.anim>0&&""!=wppizza.crt.fx&&(l=!0),t.length>0&&e.each(t,function(a,t){r[a]=e(this),r[a].wrap("<div class='wppizza-cart-wrap'></div>"),n[a]=r[a].css(["backgroundColor"]),n[a]["offset-top"]=r[a].offset().top,n[a].state="",n[a]["height-int"]=r[a].height(),n[a]["width-int"]=r[a].width(),i&&p>n[a]["offset-top"]+n[a]["height-int"]&&(n[a]["limit-bottom"]=Math.floor(p-n[a]["height-int"])),z[a]=r[a].parent(),r[a].width(n[a]["width-int"]),z[a].height(n[a]["height-int"])});var c=function(e,a,t){var p=0;if(i){var o=t.offset().top,r=Math.floor(o-a-e["height-int"]);0>r&&(p=r)}return p};if(l||e(window).scroll(function(){var a=e(window).scrollTop()+wppizza.crt.mt;e.each(r,function(e,t){var p=c(n[e],a,i);n[e]["offset-top"]>=a&&r[e].removeClass("wppizza-cart-fixed").css({top:"","background-color":""+n[e].backgroundColor}),n[e]["offset-top"]<a&&r[e].addClass("wppizza-cart-fixed").css({top:""+(wppizza.crt.mt+p)+"px","background-color":""+wppizza.crt.bg})})}),l){var d=!0;setTimeout(function(){e.each(r,function(e,a){var t=c(n[e],o,i);n[e]["offset-top"]>=o&&(n[e].state="relative"),n[e]["offset-top"]<o&&(r[e].addClass("wppizza-cart-fixed").css({"background-color":""+wppizza.crt.bg,top:"0"}),r[e].animate({top:""+(wppizza.crt.mt+t)+"px"},wppizza.crt.anim,""+wppizza.crt.fx,function(){}),n[e].state="fixed")}),d=!1},200),e(window).scroll(function(){if(!d){var t=e(window).scrollTop()+wppizza.crt.mt;clearTimeout(a),a=setTimeout(function(){e.each(r,function(e,a){var p=c(n[e],t,i);n[e]["offset-top"]>=t&&"relative"!=n[e].state&&(n[e].state="relative",r[e].removeClass("wppizza-cart-fixed"),r[e].animate({top:""},wppizza.crt.anim,""+wppizza.crt.fx,function(){r[e].css({"background-color":""+n[e].backgroundColor})})),n[e]["offset-top"]<t&&("fixed"!=n[e].state||i)&&(n[e].state="fixed",r[e].addClass("wppizza-cart-fixed").css({"background-color":""+wppizza.crt.bg}),r[e].animate({top:""+(wppizza.crt.mt+p)+"px"},wppizza.crt.anim,""+wppizza.crt.fx,function(){}))})},100)}})}};if("undefined"!=typeof wppizza.ofqc){var t=e("#wppizza-send-order .wppizza-item-quantity");t.spinner({min:0}),t.on("DOMMouseScroll mousewheel",function(e){return e.originalEvent.detail>0||e.originalEvent.wheelDelta<0?parseInt(this.value)>0&&(this.value=parseInt(this.value,10)-1):this.value=parseInt(this.value,10)+1,!1}),t.keydown(function(a){return 13==a.which||35==a.which?(a.preventDefault(),e(".wppizza-update-order").trigger("click"),!1):void 0}),e(document).on("click",".wppizza-update-order",function(a){var t=e(".wppizza-item-quantity"),i={};e.each(t,function(a,t){var p=(e(this),e(this).attr("id").split("-")),o=e(this).val();i[p[2]]=o}),e("html").css({position:"relative"}),e("body").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>'),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"wppizza-update-order",data:i}},function(e){window.location.href=window.location.href},"json").error(function(a,t,i){e("body>#wppizza-loading").remove(),console.log("error : "+i),console.log(a.responseText)})})}e(document).on("keyup",".wppizza-cart-incr",function(a){this.value=this.value.replace(/[^0-9]/g,""),(13==a.keyCode||35==a.keyCode)&&e(this).closest("li").find(".wppizza-cart-increment").trigger("click")});var p="";e(document).on("focus",".wppizza-cart-incr",function(e){p=this.value.replace(/[^0-9]/g,"")}),e(document).on("blur",".wppizza-cart-incr",function(a){this.value=this.value.replace(/[^0-9]/g,""),p!=this.value&&e(this).closest("li").find(".wppizza-cart-increment").trigger("click")});var o=function(e,a){if(e.length>0)for(i=0;i<e.length;i++){var t=new Function("term","return "+e[i]+"(term);");t(a)}};if(e(document).on("click",".wppizza-add-to-cart,.wppizza-remove-from-cart,.wppizza-cart-refresh,#wppizza-force-refresh,.wppizza-cart-increment,.wppizza-empty-cart-button",function(a){if(e(".wppizza-open").length>0){a.preventDefault(),a.stopPropagation(),"undefined"!=typeof wppizza.isCheckout?(e("html").css({position:"relative"}),e("body").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>'),e(".wppizza-ordernow").attr("disabled","true")):e(".wppizza-order").prepend('<div id="wppizza-loading"></div>');var t=e(this),i=t.attr("id"),p=e(".wppizza-cart-button input,.wppizza-cart-button>a,.wppizza-empty-cart-button");p.attr("disabled","true");var r=!1;"undefined"==typeof wppizza.itm||"undefined"==typeof wppizza.itm.fbatc||t.hasClass("wppizza-add-to-cart-btn")||(r=!0);var n=1,z="";if(t.hasClass("wppizza-add-to-cart")){type="add";var l=i.split("-"),c=t.closest("article").find("#wppizza-category-"+l[1]).val();"undefined"!=typeof c&&(z=c)}if(t.hasClass("wppizza-remove-from-cart")&&(type="remove"),t.hasClass("wppizza-empty-cart-button")&&(type="removeall",i=0),(t.hasClass("wppizza-cart-refresh")||"wppizza-force-refresh"==i)&&(type="refresh"),t.hasClass("wppizza-cart-increment")){var n=t.closest("li").find(".wppizza-cart-incr").val();0==n?type="remove":type="increment"}if("removeall"!=type&&"add"!=type&&t.fadeOut(100).fadeIn(400),r||"add"!=type||t.fadeOut(100).fadeIn(400),r&&"add"==type){var d=t.html();t.fadeOut(100,function(){t.html("<div class='wppizza-item-added-feedback'>"+wppizza.itm.fbatc+"</div>").fadeIn(400).delay(wppizza.itm.fbatcms).fadeOut(400,function(){t.html(d).fadeIn(100)})})}jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:type,id:i,itemCount:n,catId:z}},function(a){return"undefined"!=typeof wppizza.isCheckout?(window.location.href=window.location.href,void window.location.reload(!0)):(e(".wppizza-order").html(a.itemsajax),e(".wppizza-cart-button").html(a.button),e(".wppizza-cart-nocheckout").html(a.nocheckout),e(".wppizza-cart-total-items-label").html(a.order_value.total_price_items.lbl),e(".wppizza-cart-total-items-value").html(a.currency_left+""+a.order_value.total_price_items.val+a.currency_right),""==a.nocheckout&&(e(".wppizza-cart-discount-label").html(a.order_value.discount.lbl),""!=a.order_value.discount.val?e(".wppizza-cart-discount-value").html('<span class="wppizza-minus"></span>'+a.currency_left+a.order_value.discount.val+a.currency_right):e(".wppizza-cart-discount-value").html(a.order_value.discount.val),e(".wppizza-cart-delivery-charges-label").html(a.order_value.delivery_charges.lbl),""!=a.order_value.delivery_charges.val?e(".wppizza-cart-delivery-charges-value").html(a.currency_left+""+a.order_value.delivery_charges.val+a.currency_right):e(".wppizza-cart-delivery-charges-value").html(a.order_value.delivery_charges.val),e(".wppizza-cart-tax-label").html(a.order_value.item_tax.lbl),e(".wppizza-cart-tax-value").html(a.order_value.item_tax.formatted),e(".wppizza-cart-tax-included-label").html(a.order_value.taxes_included.lbl),e(".wppizza-cart-tax-included-value").html(a.currency_left+""+a.order_value.taxes_included.val+a.currency_right),e(".wppizza-cart-total-label").html(a.order_value.total.lbl),e(".wppizza-cart-total-value").html(a.currency_left+""+a.order_value.total.val+a.currency_right)),(""!=a.nocheckout||0==a.items.length)&&(e(".wppizza-cart-discount-label").html(""),e(".wppizza-cart-discount-value").html(""),e(".wppizza-cart-delivery-charges-label").html(""),e(".wppizza-cart-delivery-charges-value").html(""),e(".wppizza-cart-total-label").html(""),e(".wppizza-cart-total-value").html(""),e(".wppizza-cart-tax-label").html(""),e(".wppizza-cart-tax-value").html(""),e(".wppizza-cart-tax-included-label").html(""),e(".wppizza-cart-tax-included-value").html("")),0==a.items.length&&(e(".wppizza-cart-total-items-label").html(""),e(".wppizza-cart-total-items-value").html("")),p.removeAttr("disabled"),void o(wppizza.funcCartRefr,a))},"json").error(function(a,t,i){console.log("error : "+i),console.log(a.responseText),e(".wppizza-order #wppizza-loading").remove()})}}),e(document).on("click",".wppizza-add-to-cart",function(a){0==e(".wppizza-open").length&&e(".wppizza-cart").length>0&&alert(wppizza.msg.closed)}),e(document).on("click","#wppizza-order-pickup-sel, #wppizza-order-pickup-js",function(a){if(e(".wppizza-open").length>0&&e(".wppizza-cart").length>0||e("#wppizza-send-order").length>0){var t=e(this);t.attr("disabled",!0);var i=t.is(":checked");if(1==i){if("wppizza-order-pickup-js"==t.attr("id"))if("undefined"!=typeof wppizza.opt&&"undefined"!=typeof wppizza.opt.pickupConfirm){if(!confirm(wppizza.msg.pickup))return i?t.attr("checked",!1):t.attr("checked",!0),void t.attr("disabled",!1)}else alert(wppizza.msg.pickup)}else e("html").css({position:"relative"}),e("body").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>'),e(".wppizza-ordernow").attr("disabled","true");jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"order-pickup",value:i,data:e("#wppizza-send-order").serialize(),locHref:location.href,urlGetVars:location.search}},function(e){var a="";"undefined"!=typeof e.anchor&&(a=e.anchor),window.location.href=e.location+a,window.location.reload(!0)},"json").error(function(e,a,t){console.log("error : "+t),console.log(e.responseText)})}}),e("#wppizza_calc_handling").length>0){var r=e("input[name='wppizza-gateway']");0==r.length&&(r=e("select[name='wppizza-gateway']")),r.change(function(a){if(e("#wppizza-send-order").prepend('<div id="wppizza-loading"></div>'),r.is(":radio"))var t=e("input[name='wppizza-gateway']:checked").val();else var t=e("select[name='wppizza-gateway']").val();jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"wppizza-select-gateway",data:e("#wppizza-send-order").serialize(),selgw:t}},function(e){window.location.href=window.location.href},"json").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+i),console.log(a.responseText)})})}e(document).on("click",".wppizza-trigger-choose",function(a){e(".wppizza-open").length>0&&e(".wppizza-cart").length>0&&alert(wppizza.msg.choosesize)}),e(document).on("click",".wppizza-trigger-click",function(a){if(e(".wppizza-open").length>0&&e(".wppizza-cart").length>0){var t=this.id.split("-");t=t.splice(2),t=t.join("-"),target=e("#wppizza-"+t),target.trigger("click")}}),e(document).on("click","#wppizza-login,#wppizza-login-cancel",function(a){e("#wppizza-user-login-action").toggle(300),e("#wppizza-user-login-option>span>a").toggle()}),e(document).on("click","#wppizza_btn_login",function(a){e("#wppizza-user-login-action").append('<div id="wppizza-loading"></div>')}),e(document).on("change","#wppizza_account",function(a){e("#wppizza-user-register-info").toggle(200),e(".wppizza-login-error").remove()}),e("#wppizza-send-order").length>0&&jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"nonce",val:"register"}},function(a){e("#wppizza-create-account").append(a)},"html").error(function(e,a,t){console.log("error : "+t),console.log(e.responseText)}),e(document).on("click",".wppizza-ordernow",function(a){e("#wppizza-send-order").validate().settings.ignore=""});var n=e("#wppizza-send-order #ctips"),z=n.val();n.keydown(function(a){return 13==a.which||35==a.which?(a.preventDefault(),e("#wppizza-ctips-btn").trigger("click"),!1):void 0}),e(document).on("click","#wppizza-ctips-btn",function(a){e("#wppizza-send-order").validate().settings.ignore="#wppizza-send-order>fieldset>input,#wppizza-send-order>fieldset>textarea,#wppizza-send-order>fieldset>select";var t=e("#wppizza-send-order").valid();if(t){var i=e("#wppizza-send-order #ctips").val();z!=i&&(e("#wppizza-send-order").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>'),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"add_tips",data:e("#wppizza-send-order").serialize(),locHref:location.href,urlGetVars:location.search}},function(e){window.location.href=e.location},"json"))}}),e("#wppizza-login-frm").validate({}),e("#wppizza-send-order").validate({rules:{ctips:{number:!0}},invalidHandler:function(a,t){if(t.numberOfInvalids()){var i=e(t.errorList[0].element),p=e(window),o=p.scrollTop(),r=o+p.height(),n=i.offset().top,z=n+i.height(),l=r>=z&&n>=o;l||e("html, body").animate({scrollTop:i.offset().top-50},300)}},submitHandler:function(a){e(".wppizza-ordernow").attr("disabled","true");var t=!1,i=!1;if(e("input[name='wppizza-gateway']").length>0){var p=e("input[name='wppizza-gateway']");if(p.is(":radio"))var o=e("input[name='wppizza-gateway']:checked");else var o=p;t=o.hasClass("wppizzaGwAjaxSubmit"),i=o.hasClass("wppizzaGwCustom")}else{var o=e("select[name='wppizza-gateway']");t=e("select[name='wppizza-gateway'] option:selected").hasClass("wppizzaGwAjaxSubmit"),i=e("select[name='wppizza-gateway'] option:selected").hasClass("wppizzaGwCustom")}var r=e("#wppizza-send-order"),n=o.val(),z=e("#wppizza_profile_update").is(":checked");1==z&&jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"profile_update",data:r.serialize()}},function(e){},"html");var c=e("#wppizza-user-login"),d=e(".wppizza-login-error");d.length>0&&d.remove();var s=e("input[type=radio][name='wppizza_account']:checked");return c.hide(),"undefined"!=typeof s&&"register"==s.val()?(r.prepend('<div id="wppizza-loading"></div>'),void jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"new-account",data:r.serialize()}},function(p){return"undefined"!=typeof p.error?(e("#wppizza-user-register-info").append(p.error),e("#wppizza-send-order #wppizza-loading").remove(),void c.show()):void("undefined"==typeof p.error&&l(r,n,t,i,a))},"json")):void l(r,n,t,i,a)}});var l=function(a,t,i,p,o){return"undefined"==typeof wppizza.cfrm||a.hasClass("wppizza-confirm-order")?void jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"checkifopen"}},function(r){return"undefined"!=typeof r.isclosed?(alert(r.isclosed),window.location.href=window.location.href,void window.location.reload(!0)):p?(window["wppizza"+t+"payment"](),void jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"wppizza-set-userdata",data:e("#wppizza-send-order").serialize(),hash:e("#wppizza_hash").val()}},function(e){},"json").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+i),console.log(a.responseText)})):"cod"==t||i?(a.prepend('<div id="wppizza-loading"></div>'),e("#wppizza-user-login").empty().remove(),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"sendorder",data:a.serialize()}},function(t){e("html, body").animate({scrollTop:0},300),e("#wppizza-send-order #wppizza-loading").remove(),a.html('<div id="wppizza-order-received">'+t+"</div>")},"html").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+i),console.log(a.responseText)}),void 0):(a.prepend('<div id="wppizza-loading" style="opacity:0.8;"></div>'),void o.submit())},"json").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+i),console.log(a.responseText)}):(e("#wppizza-user-login").empty().remove(),a.prepend('<div id="wppizza-loading"></div>'),void jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"confirmorder",data:a.serialize(),hasClassAjax:i,hasClassCustom:p}},function(t){a.html(t),a.addClass("wppizza-confirm-order"),e("#wppizza-send-order #wppizza-loading").remove()},"html").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+i),console.log(a.responseText)}))};if(jQuery.extend(jQuery.validator.messages,{required:wppizza.validate_error.required,email:wppizza.validate_error.email,number:wppizza.validate_error.decimal}),e.validator.methods.number=function(e,a){return this.optional(a)||/^(?:\d+|\d{1,3}(?:[\s\.,]\d{3})+)(?:[\.,]\d+)?$/.test(e)},e(document).on("click",".wppizza-cart-button>a",function(a){a.preventDefault(),a.stopPropagation();var t=e(this).attr("disabled");if("undefined"==typeof t||t===!1){var i=jQuery(this).attr("href");return void(window.location.href=i)}}),"undefined"!=typeof wppizza.usingCache){var c=e("#wppizza-cart-nocache-attributes").val();jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"hasCachePlugin",attributes:c}},function(a){e(".wppizza-cart-nocache").html(a.markup),o(wppizza.funcCartRefr,a.cart)},"json").complete(function(){a()}).error(function(e,a,t){console.log("error : "+t),console.log(e.responseText)})}else a();e(document).on("change",".wppizza-add-to-cart-size",function(a){var t=e(this),i=e(this).attr("id"),p=i.split("-").pop(-1),o=e("#wppizza-add-to-cart-size-"+p).val();t.closest("span").find(".wppizza-add-to-cart").prop("id","wppizza-"+o)}),e(document).on("click",".wppizza-add-to-cart-select",function(a){var t=e(this),i=t.next();i.trigger("click")}),wppizzaShortcodeTotals=function(){e(".wppizza-totals").length>0&&jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"gettotals"}},function(a){var t=e(".wppizza-totals-currency"),i=e(".wppizza-total"),p=e(".wppizza-totals-itemcount"),o=e(".wppizza-totals-checkout-button"),r=e(".wppizza-totals-viewcart");a.items.length<=0?(t.html(a.currency),i.html(a.order_value.total_price_items.val),p.length>0&&p.html("&nbsp;"),r.length>0&&r.html("&nbsp;")):(t.html(a.currency),e(".wppizza-total-items").length>0?i.html(a.order_value.total_price_items.val):i.html(a.order_value.total.val),p.length>0&&p.html(a.itemcount),r.length>0&&r.html(a.viewcart)),o.html(a.button)},"json").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+i),console.log(a.responseText)})},wppizzaShortcodeTotals(),wppizzaMiniCart=function(){var a=e("#wppizza-mini-cart"),t=e(".wppizza-cart-nocache");if(a.length>0){var i=e(window);if("undefined"!=typeof wppizza.crt.mCartPadTop){var p=wppizza.crt.mCartPadTop;if("undefined"!=typeof wppizza.crt.mCartPadElm)var o=e(""+wppizza.crt.mCartPadElm);else var o=e("body")}if(t.length>0)var r=t;else var r=e(".wppizza-cart");if("undefined"!=typeof wppizza.crt.mCartElm&&a.prependTo(""+wppizza.crt.mCartElm),"undefined"!=typeof wppizza.crt.mCartStatic)return void("undefined"!=typeof o&&o.css({"padding-top":"+="+p+"px"}));var n=!0;setTimeout(function(){d(i,a,r,p,o),n=!1},500);var z;e(window).scroll(function(){n||(clearTimeout(z),z=setTimeout(function(){d(i,a,r,p,o)},300))}),e(window).resize(function(){n||(clearTimeout(z),z=setTimeout(function(){d(i,a,r,p,o)},300))})}},wppizzaMiniCart();var d=function(e,a,t,i,p){var o=e.width();if("undefined"!=typeof wppizza.crt.mCartMaxWidth)var r=wppizza.crt.mCartMaxWidth;if("undefined"!=typeof r&&o>r||"undefined"!=typeof wppizza.isCheckout)return void(a.is(":visible")&&a.fadeOut(250));var n=e.scrollTop(),z=n+e.height(),l=t.offset().top,c=l+t.height(),d=n>=c||l>=z;d&&a.is(":hidden")&&("undefined"!=typeof p&&p.animate({"padding-top":"+="+i+"px"},250),a.fadeIn(250)),!d&&a.is(":visible")&&("undefined"!=typeof p&&p.animate({"padding-top":"-="+i+"px"},250),a.fadeOut(250))};e(document).on("click",".wppizza-totals-viewcart",function(a){var t=e(".wppizza-cart");if(t.length>0){var i=e("#wppizza-mini-cart"),p=i.outerHeight(),o=i.position().top+p,r=t.offset().top-(o+10);e("html, body").animate({scrollTop:Math.round(r)},100)}})});